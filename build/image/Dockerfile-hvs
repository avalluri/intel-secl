#  Copyright (C) 2021 Intel Corporation
#  SPDX-License-Identifier: BSD-3-Clause

FROM centos:8

COPY cmd/hvs/hvs /usr/bin/hvs

COPY build/linux/hvs/*.pem /tmp/

RUN  mkdir -p /tmp/schema /tmp/templates 

COPY build/linux/hvs/schema/* /tmp/schema/

COPY build/linux/hvs/templates/* /tmp/templates/

COPY build/image/entrypoint-hvs.sh /entrypoint.sh

RUN mkdir -p /opt/hvs/privacyca-aik-requests

RUN chmod +0766 /opt/hvs/privacyca-aik-requests /tmp/schema /tmp/templates

RUN touch /.container-env && chmod +x /entrypoint.sh

ENTRYPOINT ["/entrypoint.sh"]
